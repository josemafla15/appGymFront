<div class="my-workouts">
  <div class="header">
    <h1>My Workouts</h1>
    <p class="subtitle">{{ getTodayName() }}, {{ today | date:'mediumDate' }}</p>
  </div>

  <app-loading-spinner *ngIf="loading"></app-loading-spinner>

  <app-alert *ngIf="error" type="warning" [message]="error"></app-alert>

  <div *ngIf="!loading && !error && assignment" class="workouts-content">
    <!-- Program Info -->
    <mat-card class="program-info">
      <mat-card-content>
        <h2>{{ assignment.week_template.name }}</h2>
        <p *ngIf="assignment.week_template.description">{{ assignment.week_template.description }}</p>
      </mat-card-content>
    </mat-card>

    <!-- Workout Days -->
    <div class="workouts-grid">
      <mat-card 
        *ngFor="let status of workoutStatuses" 
        class="workout-card"
        [class.completed]="status.isCompletedToday">
        <mat-card-header>
          <div class="card-header-content">
            <div class="workout-title">
              <mat-icon [class.completed-icon]="status.isCompletedToday">
                {{ status.isCompletedToday ? 'check_circle' : getWorkoutIcon(status.day) }}
              </mat-icon>
              <h3>{{ status.day.name }}</h3>
            </div>
            <mat-chip 
              *ngIf="status.isCompletedToday"
              class="completed-chip">
              ✓ Completed
            </mat-chip>
          </div>
        </mat-card-header>

        <mat-card-content>
          <div class="workout-meta">
            <span class="meta-item">
              <mat-icon>fitness_center</mat-icon>
              {{ status.day.exercises?.length || 0 }} exercises
            </span>
          </div>

          <div class="status-info" *ngIf="status.isCompletedToday">
            <mat-icon>info</mat-icon>
            <span>You've already completed this workout today!</span>
          </div>
        </mat-card-content>

        <mat-card-actions>
          <!-- Mostrar Start Workout solo si NO está completado -->
          <button 
            *ngIf="!status.isCompletedToday"
            mat-raised-button 
            color="primary"
            (click)="onStartWorkout(status.day.id)">
            <mat-icon>play_arrow</mat-icon>
            Start Workout
          </button>

          <!-- Mostrar View Details si está completado -->
          <button 
            *ngIf="status.isCompletedToday"
            mat-stroked-button 
            color="primary"
            (click)="onViewWorkout(status.day.id)">
            <mat-icon>visibility</mat-icon>
            View Details
          </button>
        </mat-card-actions>
      </mat-card>
    </div>

    <!-- Empty State -->
    <mat-card *ngIf="workoutStatuses.length === 0" class="empty-state">
      <mat-card-content>
        <mat-icon>info</mat-icon>
        <h3>No workouts available</h3>
        <p>Your program doesn't have any active workout days yet.</p>
      </mat-card-content>
    </mat-card>
  </div>
</div>